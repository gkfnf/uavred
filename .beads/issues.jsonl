{"id":"uavred-0u1","title":"实现 Agent 调度系统","description":"实现多 Agent 协同工作的调度系统，支持任务分配、状态管理和依赖协调","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-30T22:54:22.342364+08:00","created_by":"fk","updated_at":"2025-12-30T22:54:22.342364+08:00","labels":["agent","core","scheduler"]}
{"id":"uavred-2q4","title":"需求梳理：UAV红队测试平台功能需求确认","description":"\n\n## 任务目标\n与人类专家合作，完整梳理UAV红队测试平台的功能需求。\n\n## 需要确认的内容\n\n### 1. 核心功能需求\n- 编排能力：Agent任务编排UI设计需求\n- 可视化需求：流量细节展示粒度、实时性要求\n- 监控需求：对Agent执行过程的可观测性\n- 数据持久化：测试结果、日志、证据链保存\n\n### 2. UAV生态支持范围\n- 优先支持的协议(MAVLink, DJI, ArduPilot, PX4等)\n- 硬件接口(串口、网络、无线)\n- 固件类型和版本范围\n\n### 3. Web侧安全测试能力\n- 受控目标web应用的场景\n- 支持的web漏洞类型\n- 与传统web测试工具的集成(Burp等)\n\n### 4. Agent执行环境需求\n- Kali容器中需要的工具链和库\n- Agent可调用的API界面\n- 结果上报和日志采集机制\n- 性能和资源限制\n\n### 5. 安全隔离要求\n- 多租户隔离需求\n- 沙箱逃逸防护\n- 敏感数据加密存储\n- 审计日志要求\n\n### 6. 用户角色定义\n- 人类红队专家的操作权限\n- Agent的运行权限边界\n- 审计员/管理员的需求\n\n### 7. 扩展性需求\n- 新Agent类型的集成方式\n- 新协议/工具的接入流程\n- 第三方插件或集成API\n\n## 输出物\n- requirements.md 文档，包含详细需求表\n- 使用场景和用户故事(至少10+)\n- 验收标准清单\n- 风险和约束条件列表\n\n## 完成标准\n- 与人类专家进行1-2轮需求评审\n- 需求文档覆盖度\u003e=95%\n- 优先级和工作量评估完成\n","status":"blocked","priority":0,"issue_type":"task","assignee":"warp-agent","created_at":"2025-12-31T01:06:38.538445+08:00","created_by":"fk","updated_at":"2025-12-31T14:24:21.460578+08:00","labels":["architecture","requirements"],"comments":[{"id":1,"issue_id":"uavred-2q4","author":"fk","text":"Draft created: docs/requirements.md. Please review sections 7-12 and answer open questions Q1-Q10 (scope, web testing integration, execution model, isolation, storage, observability defaults, approval gates, export formats, MVP screens, threat model). After answers, I will refine priorities, add measurable NFR targets, and expand acceptance criteria.","created_at":"2025-12-30T18:16:17Z"},{"id":2,"issue_id":"uavred-2q4","author":"fk","text":"Updated docs: (1) docs/requirements.md is now bilingual and reflects review answers (HTTP/FTP/TELNET P0; MAVLink/DJI P1; Caido+TrafficQL; VM-first; SQLite; approvals; markdown reporting; UI IA from interface_pic). (2) Added docs/task_breakdown.md with agent-sized tasks + acceptance criteria derived from requirements + UI mocks. Remaining questions: Q1 Caido export format we will parse (JSON/HAR/SQLite/custom?); Q2 TrafficQL scope (need aggregates/time windows?); Q3 confirm workspace quota is disk(DB+artifacts), runtime VM resources are separate; Q4 v0.1 C2: interface-only or minimal working channel?","created_at":"2025-12-30T21:53:54Z"}]}
{"id":"uavred-2v5","title":"工程任务拆分：梳理20+个Agent友好的开发任务，明确依赖和估工","description":"\n\n## 任务目标\n将系统设计拆分成20-30个Agent可独立完成的开发任务，每个任务工作量在2-4周内。\n\n## 拆分策略\n1. 按功能模块：前端、后端、容器、集成\n2. 按优先级：MVP必需、核心功能、增强功能\n3. 按依赖关系：识别关键路径\n4. 按Agent专长：UI开发、后端服务、基础设施等\n\n## 任务分类\n\n### Phase 1: 基础框架(Week 1-2)\n- [ ] 修复GPUI编译问题和依赖\n- [ ] 搭建后端项目结构(API框架、DB初始化)\n- [ ] Docker容器管理基础架构(镜像构建、生命周期API)\n- [ ] 定义Agent标准接口和通讯协议\n\n### Phase 2: 核心调度(Week 3-4)\n- [ ] 实现任务调度引擎(优先级队列、依赖管理)\n- [ ] 实现Agent生命周期管理(注册、领取、报告、清理)\n- [ ] 实现Kali容器的创建、配置、清理流程\n- [ ] 构建VNC代理层(连接、认证、转发)\n\n### Phase 3: 前端编排(Week 5-6)\n- [ ] 实现看板基础界面(GPUI组件、布局)\n- [ ] 实现任务卡片和编排交互(拖拽、快捷菜单)\n- [ ] 实现任务模板库和参数配置\n- [ ] 实现实时状态更新(WebSocket集成)\n\n### Phase 4: 监控和反馈(Week 7-8)\n- [ ] 实现Agent执行状态展示\n- [ ] 实现VNC嵌入和实时流操作展示\n- [ ] 实现流量实时捕获和展示(Caido集成)\n- [ ] 实现日志采集和展示\n\n### Phase 5: 结果分析(Week 9-10)\n- [ ] 实现漏洞数据库持久化\n- [ ] 实现流量分析和解析展示\n- [ ] 实现证据链收集和展示\n- [ ] 实现报告生成和导出\n\n### Phase 6: Agent能力实现(Week 11+)\n- [ ] 网络扫描Agent\n- [ ] UAV协议分析Agent(MAVLink)\n- [ ] 固件分析Agent\n- [ ] 漏洞利用验证Agent\n- [ ] Web测试Agent\n- [ ] 自定义Agent框架\n\n## 每个任务的标准\n\n### Task定义模板\n- **标题**：清晰、可度量\n- **描述**：需求、输入、输出、验收标准\n- **工作量**：人天估计(通常8-32 days/40h)\n- **依赖**：阻塞的任务ID\n- **标签**：frontend/backend/infra/integration\n- **验收标准**：\u003e=3条清晰的acceptance criteria\n- **Agent友好性**：代码模板、集成示例、已知陷阱\n\n## 输出物\n- task_breakdown.md：完整的任务拆分表\n- dependency_graph.svg：任务依赖图，标记关键路径\n- phase_roadmap.md：按阶段的roadmap\n- acceptance_criteria.md：所有任务的验收标准清单\n- estimate_summary.md：总体工作量统计和时间表\n\n## 完成标准\n- 至少20个清晰的子任务被创建\n- 每个任务有明确的验收标准和工作量估计\n- 关键路径被识别和优化\n- 无循环依赖\n- 平均单任务工作量10-20工作日(合理范围)\n","status":"open","priority":0,"issue_type":"task","assignee":"architect-agent","created_at":"2025-12-31T01:07:34.510014+08:00","created_by":"fk","updated_at":"2025-12-31T01:07:34.510014+08:00","labels":["architecture","task-planning"],"dependencies":[{"issue_id":"uavred-2v5","depends_on_id":"uavred-ups","type":"blocks","created_at":"2025-12-31T01:07:34.512017+08:00","created_by":"fk"}]}
{"id":"uavred-4nf","title":"构建 GPUI 基础 UI 框架","description":"基于 GPUI 构建高信息密度的 UI 界面，参考 Zed 设计风格","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-30T22:54:10.744194+08:00","created_by":"fk","updated_at":"2025-12-30T22:54:10.744194+08:00","labels":["gpui","ui"],"dependencies":[{"issue_id":"uavred-4nf","depends_on_id":"uavred-y24","type":"blocks","created_at":"2025-12-30T22:54:46.037992+08:00","created_by":"fk"},{"issue_id":"uavred-4nf","depends_on_id":"uavred-0u1","type":"blocks","created_at":"2025-12-30T22:54:56.917854+08:00","created_by":"fk"}]}
{"id":"uavred-8sm","title":"风险评估和缓解策略：技术债、性能、安全、集成风险","description":"\n\n## 任务目标\n识别关键技术风险并制定缓解策略，避免后续开发中的重大阻塞。\n\n## 风险识别\n\n### 1. 技术债评估\n- GPUI编译问题的根本原因和长期解决方案\n- 现有代码结构的重构需求\n- 依赖版本管理和更新策略\n- 性能基线和优化目标\n\n### 2. 架构风险\n- 前后端通讯协议的版本兼容性\n- 数据库schema演进策略\n- 微服务vs单体的权衡点\n- 状态管理和分布式事务问题\n\n### 3. 性能风险\n- Agent调度器的可扩展性(支持Agent数量上限)\n- 大量并发流量捕获和展示的性能边界\n- VNC代理的延迟和带宽要求\n- 数据库查询优化需求\n\n### 4. 安全风险\n- 沙箱逃逸防护评估\n- 敏感凭证的加密存储策略\n- 审计日志的完整性保证\n- Agent之间的权限隔离\n- 网络隔离的配置评估\n\n### 5. 集成风险\n- Caido集成的API稳定性\n- Docker API的兼容性问题\n- VNC代理的协议兼容性\n- 第三方工具的版本依赖\n\n### 6. 部署和运维风险\n- 开发环境和生产环境差异\n- 版本更新的回滚策略\n- 数据备份和恢复方案\n- 监控和告警体系\n\n## 缓解策略\n\n### 对每个关键风险：\n- 风险等级评估(Critical/High/Medium/Low)\n- 可能的影响范围\n- 缓解方案(技术方案、流程方案、训练方案)\n- 验证方式和度量标准\n- 责任owner\n- 执行时间表\n\n## 输出物\n- risk_register.md：完整的风险登记表\n- risk_matrix.svg：风险等级矩阵图\n- mitigation_plan.md：详细的缓解策略\n- test_strategy.md：风险验证的测试策略\n- contingency_plan.md：应急预案\n\n## 完成标准\n- 识别\u003e=15个关键风险\n- 高风险(Critical/High)有具体的缓解计划\n- 测试策略覆盖\u003e=5个高风险场景\n- 预期的问题和解决方案被明确文档化\n","status":"open","priority":1,"issue_type":"task","assignee":"architect-agent","created_at":"2025-12-31T01:07:50.543286+08:00","created_by":"fk","updated_at":"2025-12-31T01:07:50.543286+08:00","labels":["architecture","risk-management"],"dependencies":[{"issue_id":"uavred-8sm","depends_on_id":"uavred-2v5","type":"blocks","created_at":"2025-12-31T01:07:50.545264+08:00","created_by":"fk"}]}
{"id":"uavred-b3d","title":"Architecture Design: 安全测试意图编排平台 (Architect Agent Task)","description":"\n\n## 任务概述\n这是项目的架构设计史诗任务，由架构师Agent负责与人类专家协同梳理需求、设计架构、拆分工程任务。\n\n## 核心目标\n1. **需求梳理**\n   - 确认用户故事和技术需求\n   - 确定支持的UAV生态协议(MAVLink, DJI, ArduPilot, PX4等)\n   - 列出平台应支持的Web侧测试能力\n   - 定义Agent能力体系和沙箱能力\n\n2. **架构设计**\n   - 前端架构：基于GPUI的编排看板设计(高信息密度)\n   - 后端架构：Agent调度、容器管理、VNC proxy、流量嗅探集成\n   - 容器架构：Kali Docker沙箱、资源隔离、生命周期管理\n   - 集成架构：VNC、Caido、流量分析工具集成\n\n3. **任务拆分**\n   - 将工程拆分成Agent可独立完成的粒度(通常\u003c40h)\n   - 确定任务间依赖关系\n   - 标记每个任务的Agent友好性程度\n   - 优先级排序\n\n4. **技术债评估**\n   - 评估现有GPUI编译问题\n   - 性能瓶颈识别\n   - 安全隔离方案评估\n\n## 输出物\n1. 详细的需求规范文档 (Architecture.md)\n2. 系统架构图(前后端分离、容器隔离、Agent能力)\n3. UI/UX框架设计文档，基于Figma原型优化\n4. Agent友好的工程任务列表(至少20+子任务，分类清晰)\n5. 依赖关系图和关键路径分析\n6. 开发阶段规划(4-6个阶段)\n\n## 任务结构\n- Subtask 1: 需求梳理和确认\n- Subtask 2: 架构和组件设计\n- Subtask 3: UI/UX框架设计\n- Subtask 4: 工程任务拆分\n- Subtask 5: 风险评估和缓解策略\n- Subtask 6: 最终架构文档和交付\n\n## 成功标准\n- [ ] 人类专家和架构师Agent达成需求共识\n- [ ] 架构文档包含系统各层级设计\n- [ ] 所有工程任务具体量化、有清晰的验收标准\n- [ ] 任务颗粒度合理(平均单个Agent 2-4周完成)\n- [ ] 后续Agent可直接从任务列表中选择开发\n- [ ] 零编译或集成问题的任务设计\n","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-31T01:06:09.92388+08:00","created_by":"fk","updated_at":"2025-12-31T01:06:09.92388+08:00","labels":["agent-friendly","architecture","core"],"dependencies":[{"issue_id":"uavred-b3d","depends_on_id":"uavred-2q4","type":"blocks","created_at":"2025-12-31T01:08:24.010648+08:00","created_by":"fk"}]}
{"id":"uavred-btg","title":"架构设计：系统整体架构、前后端分离、容器隔离、Agent能力体系","description":"\n\n## 任务目标\n基于需求梳理，设计完整的系统架构，包括前后端分离、容器隔离、Agent协作机制。\n\n## 设计范围\n\n### 1. 系统分层架构\n- 前端层：基于GPUI的编排看板、实时仪表板\n- 应用层：任务调度、Agent生命周期管理、VNC代理\n- 容器层：Kali沙箱、资源隔离、生命周期\n- 存储层：任务数据、执行日志、漏洞库、证据链\n\n### 2. 前端架构设计\n- 任务编排看板：看板设计、拖拽编排、模板库\n- 实时监控：Agent执行状态、流量实时显示、VNC嵌入\n- 结果分析：漏洞列表、流量分析、报告生成\n- 高信息密度设计：紧凑布局、语义化颜色、快捷键支持\n\n### 3. 后端架构设计\n- Agent调度引擎：优先级队列、依赖管理、故障恢复\n- 容器管理：Docker API集成、资源限制、生命周期\n- VNC代理层：连接管理、并发处理、安全认证\n- 流量采集：Caido集成、实时流量捕获、持久化\n- API网关：鉴权、速率限制、日志审计\n\n### 4. 容器隔离方案\n- Kali镜像定制：工具链、库依赖、初始化脚本\n- 网络隔离：专用子网、NAT、流量监控\n- 文件系统隔离：卷挂载、权限管理、内容安全扫描\n- 资源限制：CPU、内存、存储配额\n\n### 5. Agent能力体系\n- 定义Agent的标准接口：任务领取、状态报告、结果上报\n- Agent类型分类：扫描Agent、协议分析Agent、漏洞验证Agent、漏洞利用Agent\n- 新协议/工具的集成路径\n- Agent之间的协作模式\n\n### 6. 数据流设计\n- 用户意图→任务分解流程\n- 任务分配→Agent执行流程\n- 执行结果→分析展示流程\n- 关键路径识别和优化\n\n## 输出物\n- architecture.md：完整的架构设计文档\n- system_diagram.svg：系统分层架构图\n- component_diagram.svg：组件交互图\n- agent_interface.md：Agent标准接口定义\n- container_spec.md：Kali容器规范\n- api_design.md：后端API设计(初稿)\n- database_schema.md：数据库schema设计\n\n## 完成标准\n- 架构文档覆盖5+个设计维度\n- 各组件交互清晰，无歧义\n- 识别3+个关键集成点\n- 提出性能和安全的设计考量\n","status":"open","priority":0,"issue_type":"task","assignee":"architect-agent","created_at":"2025-12-31T01:06:56.524185+08:00","created_by":"fk","updated_at":"2025-12-31T01:06:56.524185+08:00","labels":["architecture","design"],"dependencies":[{"issue_id":"uavred-btg","depends_on_id":"uavred-2q4","type":"blocks","created_at":"2025-12-31T01:06:56.526326+08:00","created_by":"fk"}]}
{"id":"uavred-c80","title":"设计漏洞数据库架构","description":"设计存储和管理 UAV 安全漏洞的数据库架构","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-30T22:54:34.774694+08:00","created_by":"fk","updated_at":"2025-12-30T22:54:34.774694+08:00","labels":["database","vuln"]}
{"id":"uavred-eef","title":"最终架构交付：合并所有设计文档、生成Agent开发指南、架构评审","description":"\n\n## 任务目标\n综合所有设计成果，生成最终的架构文档和Agent开发指南，为后续Agent并行开发做好准备。\n\n## 输出物整合\n\n### 1. 完整的架构文档 (ARCHITECTURE.md)\n- 执行摘要：3-5页\n- 系统整体设计：分层架构、组件、通讯协议\n- 前端设计规范：UI框架、组件库、交互流程\n- 后端设计规范：API设计、数据库schema、缓存策略\n- 容器和基础设施：Docker镜像、网络隔离、资源管理\n- Agent能力体系：接口定义、协作模式、扩展方案\n- 安全和隔离：认证、授权、审计\n- 性能和扩展性：性能目标、扩展能力\n- 部署和运维：初期部署、监控、故障恢复\n\n### 2. Agent开发指南 (AGENT_DEVELOPMENT_GUIDE.md)\n- 开发环境搭建\n- 标准工程模板：前端模块模板、后端服务模板、Agent实现模板\n- 代码组织规范：目录结构、命名约定、import规则\n- 开发工作流：本地开发、单元测试、集成测试、代码审查\n- 常见陷阱和解决方案：编译问题、依赖冲突、集成问题\n- 测试策略：单元测试、集成测试、性能测试\n- 集成检查清单：pre-commit检查、编译检查、功能验证\n- 故障排查指南\n\n### 3. 设计决策记录 (ADR - Architecture Decision Records)\n- ADR-001: 前后端分离方案选择\n- ADR-002: GPUI vs 其他UI框架\n- ADR-003: 容器隔离方案\n- ADR-004: Agent通讯协议\n- 等等(\u003e=10条)\n\n### 4. 快速参考卡片\n- API速查表\n- 数据库schema快速参考\n- 常见命令和快捷键\n- 调试技巧\n\n### 5. 可视化资源\n- 系统架构图(高清版)\n- 数据流图\n- 任务依赖图\n- 组件关系图\n\n### 6. 检查清单\n- 架构评审检查清单\n- Pre-launch检查清单\n- 性能验收标准\n\n## 完成标准\n- 主文档\u003e=50页，覆盖所有关键设计\n- Agent开发指南能被新Agent快速上手(target: 2h)\n- \u003e=10条ADR记录关键决策\n- 所有输入输出artifacts被整合\n- 人类专家和架构师完成最终评审并签字认可\n","status":"open","priority":0,"issue_type":"task","assignee":"architect-agent","created_at":"2025-12-31T01:08:08.527555+08:00","created_by":"fk","updated_at":"2025-12-31T01:08:08.527555+08:00","labels":["architecture","documentation"],"dependencies":[{"issue_id":"uavred-eef","depends_on_id":"uavred-8sm","type":"blocks","created_at":"2025-12-31T01:08:08.529372+08:00","created_by":"fk"}]}
{"id":"uavred-m0j","title":"实现 MAVLink 协议分析 Agent","description":"解析和分析 MAVLink 协议通信，识别潜在安全漏洞","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-30T22:53:58.405505+08:00","created_by":"fk","updated_at":"2025-12-30T22:53:58.405505+08:00","labels":["agent","core","protocol"]}
{"id":"uavred-ups","title":"UI/UX设计：编排看板、实时监控、信息密度优化","description":"\n\n## 任务目标\n基于系统架构和Figma原型，详细设计UI/UX框架，确保Agent可进行高效、无歧义的开发。\n\n## 设计内容\n\n### 1. 任务编排看板\n- 看板布局设计：列表、网格、时间线视图切换\n- 编排方式：拖拽、快捷菜单、模板库\n- 任务卡片设计：信息内容、状态标记、快捷操作\n- 模板库：常见测试场景预设、参数配置面板\n\n### 2. 实时监控面板\n- Agent执行状态显示：运行中、已完成、异常\n- 流量实时可视化：协议分布、包流量、关键字段高亮\n- VNC嵌入播放：容器操作直观展示、录制回放功能\n- 日志和事件流：实时日志滚动、关键事件高亮、日志级别过滤\n\n### 3. 结果分析面板\n- 漏洞列表：严重性排序、分类展示、快速修复建议\n- 流量分析：包详情、协议解析、异常检测高亮\n- 证据链展示：执行过程、产生的文件、关键命令输出\n- 报告生成：自定义报告模板、一键导出\n\n### 4. 信息密度优化\n- 紧凑布局：减少padding、合理分割\n- 语义化颜色：成功/警告/错误/中立色定义\n- 快捷键支持：频繁操作的快捷键地图\n- 深色主题支持：眼睛舒适度和可读性\n\n### 5. 响应式设计\n- 桌面版本(\u003e1920px)：完整信息展示\n- 笔记本版本(1440-1920px)：关键信息优先\n- 设备兼容性：不同屏幕DPI的适配\n\n### 6. 交互流程设计\n- 新建任务流程：意图输入→参数配置→Agent选择→确认执行\n- 任务监控流程：看板查看→点击进入→详细观看→实时操作\n- 结果分析流程：查看概览→细节查看→导出报告\n- 错误处理流程：异常显示、恢复建议\n\n## 输出物\n- ui_design.md：详细的UI/UX设计规范\n- wireframes.fig：Figma中的详细线框图\n- component_library.md：可复用组件库定义(颜色、字体、间距等)\n- interaction_flows.md：主要交互流程描述\n- accessibility_checklist.md：无障碍设计检查表\n- implementation_guide.md：开发者实现指南，包含GPUI组件映射\n\n## 完成标准\n- 6+个主要界面的完整设计\n- 组件库包含\u003e=20个可复用组件定义\n- 交互流程覆盖\u003e=5个核心场景\n- GPUI实现可行性评估(避免第三方UI库)\n- 高信息密度指标量化(每屏幕信息元素、对比度等)\n","status":"in_progress","priority":0,"issue_type":"task","assignee":"architect-agent","created_at":"2025-12-31T01:07:14.335116+08:00","created_by":"fk","updated_at":"2025-12-31T14:25:11.774015+08:00","labels":["architecture","ui-design"],"dependencies":[{"issue_id":"uavred-ups","depends_on_id":"uavred-btg","type":"blocks","created_at":"2025-12-31T01:07:14.337394+08:00","created_by":"fk"}]}
{"id":"uavred-y24","title":"实现网络扫描 Agent","description":"实现无人机设备的网络扫描功能，包括端口扫描、服务识别和设备指纹识别","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-30T22:53:47.103735+08:00","created_by":"fk","updated_at":"2025-12-30T22:53:47.103735+08:00","labels":["agent","core","scanner"]}
