# UI/UX 设计规范

## 1. 设计原则

### 1.1 高信息密度
- 紧凑但有序的布局，充分利用屏幕空间
- 避免大面积空白区域
- 通过视觉层次和颜色编码区分信息优先级

### 1.2 简洁优雅
- 最小化装饰性图标，仅用 emoji 传递语义信息
- 采用深色主题，减少眼睛疲劳
- 清晰的文字和足够的对比度

### 1.3 语义化颜色
- **成功/正常**: 绿色 (#10b981)
- **警告/中等**: 黄色 (#fbbf24)
- **错误/严重**: 红色 (#ef4444)
- **信息/中立**: 蓝色 (#60a5fa)
- **强调/特殊**: 紫色 (#a78bfa)
- **次要**: 橙色 (#f97316)

### 1.4 功能优先
- 专注核心操作流程
- 避免过度装饰动画
- 快捷键支持高频操作

### 1.5 响应式设计
- **桌面版** (>=1920px): 充分展示所有信息
- **笔记本版** (1440-1920px): 布局调整，保留核心功能
- **DPI 适配**: 高 DPI 屏幕字体缩放

---

## 2. 主界面架构

### 2.1 整体布局

```
┌──────────────────────────────────────────────────────────────┐
│  🔴 UAVRED | [Dashboard] [Assets] [Scan] [Vulns 2] [Traffic]  │
│            Target: mavic-3-pro-v2.local  [●] AI Active       │
├───────────────────────────────────────────────────┬───────────┤
│                                                   │           │
│  Main Content Area                                │  Agent    │
│  (View 切换)                                      │  Panel    │
│                                                   │           │
│  - Mission Control                                │  🤖 Agent │
│  - Findings List                                  │  Control  │
│  - Assets Management                              │           │
│  - Scan Configuration                             │  ⚪ HIST  │
│  - Traffic Analysis                               │  💭 THGT  │
│                                                   │  📋 PLAN  │
│                                                   │  🔧 TOOL  │
│                                                   │           │
│                                                   │ >_ cmd    │
└───────────────────────────────────────────────────┴───────────┘
```

### 2.2 区域说明

| 区域 | 宽度比例 | 功能 | 可折叠 |
|------|---------|------|--------|
| Navigation Bar | 100% | 模块切换、全局状态 | ✓ |
| Main Content | 75% | 核心工作区 | ✗ |
| Agent Panel | 25% | 实时监控、日志 | ✓ |

---

## 3. 核心界面设计

### 3.1 Navigation Bar (顶部导航)

**功能**: 模块切换、全局控制

**组成部分**:

1. **Logo & Title**
   - 🔴 UAVRED (应用标识)
   - 字体: 等宽 Bold

2. **主导航 Tabs**
   - Dashboard (默认)
   - Assets
   - Scan
   - Vulns (带红色计数徽章)
   - Traffic (带计数徽章)
   - Flows

3. **右侧信息栏**
   - Target: `<device-name>`
   - 状态指示器 (🟢 AI Active / 🔴 AI Idle)
   - 时间显示

**设计细节**:
- 高度: 44px
- Tab 间距: 12px
- Hover: 背景变亮 (+10% 亮度)
- Active: 紫色背景 (#a78bfa, 30% 透明度)
- 徽章: 红色背景，白色文字，圆形

### 3.2 Mission Control (任务编排看板)

**功能**: 可视化任务编排、拖拽调整

**布局**: Kanban 三列布局

#### 列的设计

```
┌──────────────────┬──────────────────┬──────────────────┐
│ To Do (Count)  + │In Prog (Count) + │Done (Count)    + │
├──────────────────┼──────────────────┼──────────────────┤
│ [Task Card 1]    │ [Task Card 3]    │ [Task Card 5]    │
│ [Task Card 2]    │ [Task Card 4]    │                  │
└──────────────────┴──────────────────┴──────────────────┘
```

#### 任务卡片设计

```
┌────────────────────────────────────┐
│ ●  [TASK_TYPE]  Priority: HIGH    │  ← 左侧彩色指示器
│                                    │
│ 任务标题或描述文本                   │
│ (最多两行)                          │
│                                    │
│ 📍 target-device  ⏰ 2024-12-31    │  ← 元数据
└────────────────────────────────────┘
```

**卡片字段**:
- 左侧彩色指示器 (8px，对应优先级/任务类型)
- 任务类型 Tag (SCAN, ANALYSIS, RECON, EXPLOIT)
- 优先级 Tag (critical, high, medium, low)
- 标题 (2 行)
- 目标设备和时间戳 (灰色文字)

**样式**:
- 卡片背景: #252525
- 卡片高度: 80-120px
- 间距: 8px
- 圆角: 8px
- 边框: 1px solid #2d2d2d
- Hover: 背景变亮，显示快捷菜单

**拖拽交互**:
- 同列拖拽: 重新排序
- 跨列拖拽: 改变状态
- Drop 目标: 列的 Bottom (显示 drop zone)

### 3.3 Findings View (安全发现列表)

**功能**: 展示扫描发现、支持过滤和排序

#### 顶部控制区

```
┌───────────────────────────────────────┐
│ Total: 45  ●Critical: 3  ●High: 8     │  ← 统计信息
├───────────────────────────────────────┤
│ [🔍 Search...] [Export] [Settings]   │  ← 操作栏
├───────────────────────────────────────┤
│ [All] [Critical] [High] [Medium] [Low]│  ← 过滤 Tabs
│  [Info]                               │
└───────────────────────────────────────┘
```

#### Finding 列表项

```
┌─────────────────────────────────────────────────┐
│ ●  CVE-2024-1234  [CONFIRMED]                  │  ← 状态
│                                                  │
│ MAVLink Buffer Overflow Vulnerability            │
│ Detected potential buffer overflow in MAVLink    │
│ protocol parsing...                              │
│                                                  │
│ DJI Mavic 3  |  2m ago  |  High  [►]            │  ← 元数据
└─────────────────────────────────────────────────┘
```

**列表样式**:
- 行高: 100-120px
- 左侧彩色圆点: 对应 Severity
- 卡片背景: #252525
- Hover: 显示 expand 按钮
- Divider: #2d2d2d, 1px

**过滤 Tabs**:
- 选中态: 紫色背景
- 非选中: 灰色文字

### 3.4 Assets Management (资产管理)

**功能**: 管理扫描目标 UAV 设备

#### 资产列表

```
┌──────────────────────────────────────────────┐
│ Type  Device Name        Protocol  Status    │  ← Header
├──────────────────────────────────────────────┤
│ 🚁  mavic-3-pro-v2      MAVLink  🟢 Online  │
│ 🚁  phantom-4-pro       MAVLink  🟢 Online  │
│ 🚁  matrice-300         MAVLink  🔴 Offline │
│ 📱  dji-mini-2          DJI      🟢 Online  │
└──────────────────────────────────────────────┘
```

**操作**:
- 点击行: 显示资产详情
- 快捷菜单: Scan, Configuration, Delete
- 批量选择: 左侧 checkbox

### 3.5 Scan Configuration (扫描配置)

**功能**: 配置和启动扫描任务

#### 配置表单

```
目标选择
├─ [☐] mavic-3-pro-v2
├─ [☐] phantom-4-pro
└─ [☐] matrice-300

扫描类型
├─ [○] Network Scan
├─ [●] Protocol Analysis
└─ [○] Firmware Analysis

选项
├─ [☑] Deep Inspection
├─ [☑] Exploit Verification
└─ [☐] Generate Report

[启动扫描] [预览] [保存模板]
```

### 3.6 Traffic Analysis (流量分析)

**功能**: 展示 UAV 通信流量和协议分析

#### 流量面板

```
┌────────────────────────────────────┐
│ 捕获状态: 🔴 Recording  2,450 packets│
├────────────────────────────────────┤
│                                    │
│ Protocol  Src IP        Packet #   │
│ ────────────────────────────────   │
│ MAVLink   192.168.1.100 #1234      │
│ DJI       192.168.1.101 #1235      │
│ MAVLink   192.168.1.100 #1236      │
│ ...                                │
│                                    │
│ [详情] [导出] [清空] [暂停]         │
└────────────────────────────────────┘
```

### 3.7 Agent Panel (AI Agent 实时面板)

**功能**: 显示 Agent 执行状态和日志

#### 面板结构

```
┌────────────────────────┐
│ 🤖 Network Scanner     │
│ 🔴 LIVE TRACE          │
├────────────────────────┤
│ 🎯 Scan mavic-3 for    │
│    open MAVLink port   │
├────────────────────────┤
│ ⚪ [14:23:12] HISTORY  │
│ 💭 [14:23:14] THOUGHT  │
│ 📋 [14:23:15] PLAN     │
│ 🔧 [14:23:16] TOOL     │
│                        │
│ > curl -I ...          │
│ ✓ Success (200ms)      │
│                        │
│ > nmap -sV 192.1...    │
│ [⏳] Running           │
└────────────────────────┘
```

**日志类型**:
- ⚪ HISTORY: 过往状态
- 💭 THOUGHT: 思考过程
- 📋 PLAN: 执行计划
- 🔧 TOOL: 工具调用

**样式**:
- 面板宽度: 25% 视口
- 背景: #1e1e1e
- 文字: 等宽字体 (Courier New)
- 日志行高: 18px

---

## 4. 交互细节

### 4.1 标准操作模式

| 操作 | 触发方式 | 反馈 |
|------|---------|------|
| 卡片详情 | 单击卡片 | 右侧 Slide Out 面板 |
| 快捷菜单 | 右击卡片 | Context Menu |
| 拖拽 | 左键拖动 | 高亮 Drop 目标 |
| 过滤 | 点击 Tab | 列表即时更新 |
| 搜索 | 输入文字 | 高亮匹配项 |
| 收起/展开 | 双击标题 | 平滑动画 |

### 4.2 快捷键

| 快捷键 | 操作 | 上下文 |
|--------|------|--------|
| `Tab` | 切换模块 | 全局 |
| `Ctrl+F` | 搜索 | 列表视图 |
| `Ctrl+K` | 命令面板 | 全局 |
| `R` | 刷新 | 全局 |
| `E` | 导出 | Findings 列表 |
| `Space` | 播放/暂停 | Agent 面板 |
| `ESC` | 关闭详情 | 详情面板 |

### 4.3 状态反馈

**Loading 状态**:
```
[⏳] Loading...
```

**Success 状态**:
```
✓ 任务完成 (显示 2 秒后消失)
```

**Error 状态**:
```
✗ 错误信息 (保留直到用户关闭)
```

---

## 5. 响应式布局

### 5.1 桌面版 (>=1920px)

```
┌─────────────────────────────────────────────────────────┐
│ Navigation Bar (100%)                                    │
├─────────────────────────────────────────────┬───────────┤
│ Main Content (75%)                          │ Agent (25%)│
│ (充分展示所有信息)                           │            │
└─────────────────────────────────────────────┴───────────┘
```

### 5.2 笔记本版 (1440-1920px)

```
┌──────────────────────────────────────────────────────┐
│ Navigation Bar (100%)                                 │
├──────────────────────────────────────┬───────────────┤
│ Main Content (70%)                   │ Agent (30%)   │
│ (调整卡片尺寸，减少间距)              │               │
└──────────────────────────────────────┴───────────────┘
```

### 5.3 平板版 (768-1440px)

```
┌──────────────────────────────────┐
│ Navigation Bar (100%, 简化版)     │
├──────────────────────────────────┤
│ Main Content (100%)               │
│ (单列布局，Agent Panel 在底部)    │
│                                  │
├──────────────────────────────────┤
│ Agent Panel (100%, 折叠状态)      │
└──────────────────────────────────┘
```

---

## 6. 深色主题配置

### 6.1 颜色调色板

```rust
// 背景色
BG_PRIMARY:    0x1e1e1e
BG_SECONDARY:  0x252525
BG_TERTIARY:   0x2d2d2d

// 前景色
FG_PRIMARY:    0xffffff
FG_SECONDARY:  0xcccccc
FG_TERTIARY:   0x808080

// 状态色
STATUS_SUCCESS:  0x10b981
STATUS_WARNING:  0xfbbf24
STATUS_ERROR:    0xef4444
STATUS_INFO:     0x60a5fa

// 强调色
ACCENT_PRIMARY:  0xa78bfa (紫色)
ACCENT_SECONDARY: 0xf97316 (橙色)
```

### 6.2 阴影系统

```
阴影层级 1 (卡片): 
  rgba(0, 0, 0, 0.3)

阴影层级 2 (弹出框):
  rgba(0, 0, 0, 0.5)

阴影层级 3 (模态框):
  rgba(0, 0, 0, 0.8)
```

---

## 7. 字体和排版

### 7.1 字体选择

- **UI 文字**: System Font (-apple-system, segoe-ui, sans-serif)
- **等宽字体**: Courier New, Monaco, Menlo
- **标题**: Bold, 14-18px
- **正文**: Regular, 12-14px
- **代码**: Monospace, 11-13px

### 7.2 排版规范

```
标题 H1:    Bold 18px, 行高 24px
标题 H2:    Bold 16px, 行高 22px
标题 H3:    Bold 14px, 行高 20px
正文:      Regular 13px, 行高 18px
辅助文:    Regular 12px, 行高 16px
代码块:    Monospace 11px, 行高 16px
```

---

## 8. 组件间距规范

| 单位 | 像素 | 用途 |
|------|------|------|
| gap_0 | 0px | 紧密排列 |
| gap_1 | 4px | 组件内部 |
| gap_2 | 8px | 相邻元素 |
| gap_3 | 12px | 组件间距 |
| gap_4 | 16px | 分组间距 |
| gap_5 | 24px | 区域间距 |

---

## 9. 动画和过渡

### 9.1 过渡时间

```
快速过渡:  100ms (状态改变)
标准过渡:  200ms (进出动画)
缓慢过渡:  300ms (展开/折叠)
```

### 9.2 缓动曲线

```
ease-in-out (标准过渡)
ease-out (进入动画)
ease-in (退出动画)
```

### 9.3 禁用动画

支持通过 `prefers-reduced-motion` 媒体查询禁用动画。

---

## 10. 无障碍设计

### 10.1 颜色对比度

- 正常文字: 至少 4.5:1 对比度 (WCAG AA)
- 大文字: 至少 3:1 对比度 (WCAG AA)

### 10.2 焦点指示

- 所有可交互元素都有清晰的焦点样式
- 焦点顺序符合逻辑
- 使用 `outline` 而不是移除默认焦点

### 10.3 屏幕阅读器支持

- 有意义的 ARIA label
- 正确的语义 HTML
- 表单字段有关联的 label

---

## 11. 性能和优化

### 11.1 渲染优化

- 虚拟滚动: 长列表（>100 项）使用虚拟滚动
- 防抖: 搜索框 300ms 防抖
- 节流: 滚动事件 50ms 节流

### 11.2 资源加载

- 图片懒加载
- CSS-in-JS 代码分割
- 字体 Subsetting

---

## 12. 主题切换

### 12.1 深色模式（默认）

已在设计中体现。

### 12.2 浅色模式（未来支持）

保留切换入口，配色方案待定。

---

## 附录：设计系统文件清单

- ✅ ui_design.md (本文档)
- 📋 component_library.md (组件库规范)
- 📋 interaction_flows.md (交互流程文档)
- 📋 implementation_guide.md (GPUI 实现指南)

